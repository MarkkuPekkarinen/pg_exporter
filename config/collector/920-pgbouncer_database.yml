
#┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#┃ pgbouncer_database
#┃ pgbouncer database stats: http://www.pgbouncer.org/usage.html#show-databases
#┣┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈
#┃ pgbouncer_database_pool_size{datname,host,port,real_datname}            COUNTER  maximum number of server connections
#┃ pgbouncer_database_reserve_pool{datname,host,port,real_datname}         GAUGE    maximum number of additional connections for this database
#┃ pgbouncer_database_max_connections{datname,host,port,real_datname}      GAUGE    maximum number of allowed connections for this database
#┃ pgbouncer_database_current_connections{datname,host,port,real_datname}  GAUGE    current number of connections for this database
#┃ pgbouncer_database_paused{datname,host,port,real_datname}               GAUGE    1 if this database is currently paused, else 0
#┃ pgbouncer_database_disabled{datname,host,port,real_datname}             GAUGE    1 if this database is currently disabled, else 0
#┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
pgbouncer_database_116:
  name: pgbouncer_database
  desc: Pgbouncer database stats (since 1.16) # http://www.pgbouncer.org/usage.html#show-databases
  query: SHOW DATABASES;
  ttl: 10
  min_version: 11600
  tags:
    - pgbouncer

  metrics:
    - name:
        usage: LABEL
        rename: datname
        description: Name of configured database entry
    - host:
        usage: LABEL
        description: Host that pgbouncer will connects to
    - port:
        usage: LABEL
        description: Port that pgbouncer will connects to
    - database:
        usage: LABEL
        rename: real_datname
        description: The real database name pgbouncer connects to
    - force_user:
        usage: DISCARD
    - pool_size:
        usage: GAUGE
        description: Maximum number of server connections
    - min_pool_size:
        usage: GAUGE
        description: Minimum number of server connections
    - reserve_pool:
        usage: GAUGE
        description: Maximum number of additional connections for this database
    - pool_mode:
        usage: DISCARD
    - max_connections:
        usage: GAUGE
        description: Maximum number of allowed connections for this database
    - current_connections:
        usage: GAUGE
        description: Current number of connections for this database
    - paused:
        usage: GAUGE
        description: True(1) if this database is currently paused, else 0
    - disabled:
        usage: GAUGE
        description: True(1) if this database is currently disabled, else 0


pgbouncer_database_108_115:
  name: pgbouncer_database
  desc: Pgbouncer database stats (1.08-1.15) # http://www.pgbouncer.org/usage.html#show-databases
  query: SHOW DATABASES;
  ttl: 10
  min_version: 10800
  max_version: 11600
  tags:
    - pgbouncer

  metrics:
    - name:
        usage: LABEL
        rename: datname
        description: Name of configured database entry
    - host:
        usage: LABEL
        description: Host that pgbouncer will connects to
    - port:
        usage: LABEL
        description: Port that pgbouncer will connects to
    - database:
        usage: LABEL
        rename: real_datname
        description: The real database name pgbouncer connects to
    - force_user:
        usage: DISCARD
    - pool_size:
        usage: COUNTER
        description: Maximum number of server connections
    - reserve_pool:
        usage: GAUGE
        description: Maximum number of additional connections for this database
    - pool_mode:
        usage: DISCARD
    - max_connections:
        usage: GAUGE
        description: Maximum number of allowed connections for this database
    - current_connections:
        usage: GAUGE
        description: Current number of connections for this database
    - paused:
        usage: GAUGE
        description: True(1) if this database is currently paused, else 0
    - disabled:
        usage: GAUGE
        description: True(1) if this database is currently disabled, else 0

